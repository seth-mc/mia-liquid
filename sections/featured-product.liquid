{% schema %}
  {
    "name": "Product Showcase",
    "tag": "section",
    "class": "product-showcase",
    "settings": [
      {
        "type": "product",
        "id": "product",
        "label": "Product"
      },
      {
        "type": "text",
        "id": "main_heading",
        "label": "Main Heading",
        "default": "Protect yourself with m.i.a. Fentanyl Detection Wipes"
      },
      {
        "type": "text",
        "id": "sub_heading",
        "label": "Sub Heading",
        "default": "Fentanyl presence in the U.S. is skyrocketing — and coming into contact with just a few grains can kill you."
      },
      {
        "type": "text",
        "id": "intro_text",
        "label": "Introduction Text",
        "default": "Introducing m.i.a. on-the-spot detection you can bring with you to festivals and nights out."
      },
      {
        "type": "richtext",
        "id": "feature_list",
        "label": "Feature List",
        "default": "<ul><li><strong>Chemical-Free:</strong> unlike other tests, m.i.a does not require harsh chemicals.</li><li><strong>Instant:</strong> Take with you anywhere — Know in seconds.</li><li><strong>Pocket-Sized:</strong> Test discreetly without drawing attention.</li></ul>"
      },
      {
        "type": "text",
        "id": "learn_more_url",
        "label": "Learn More URL",
        "default": "/pages/about-us"
      },
      {
        "type": "text",
        "id": "closing_statement",
        "label": "Closing Statement",
        "default": "Never leave your safety up to chance"
      },
      {
        "type": "text",
        "id": "testimony",
        "label": "Customer Testimony",
        "default": "This product changed my life!"
      },
      {
        "type": "text",
        "id": "step1_text",
        "label": "Step 1 Description",
        "default": "Mark your area of concern"
      },
      {
        "type": "text",
        "id": "step2_text",
        "label": "Step 2 Description",
        "default": "Insulate the area"
      },
      {
        "type": "text",
        "id": "step3_text",
        "label": "Step 3 Description",
        "default": "Analyze the results"
      },
      {
        "type": "url",
        "id": "events_url",
        "label": "Upcoming Events URL"
      }
    ],
    "presets": [
      {
        "name": "Product Showcase",
        "category": "Product"
      }
    ]
  }
  {% endschema %}
  
  {% assign product = section.settings.product %}
  {% assign variant_images = product.images | where: 'attached_to_variant?', true | map: 'src' %}
  
  <style>
    .button-style {
      background-color: #0000FF; /* standard-blue */
      color: white;
      font-family: 'Aux Mono', monospace;
      border-radius: 0.25rem;
      padding: 0.5rem 1rem;
      text-align: center;
      display: inline-block;
      transition: background-color 0.3s;
    }
    .button-style:hover {
      background-color: #0000CC;
    }
    .scrollbar-hide::-webkit-scrollbar {
      display: none;
    }
    .scrollbar-hide {
      -ms-overflow-style: none;
      scrollbar-width: none;
    }
  </style>
  
  <div class="w-full border-t-2 border-standard-blue overflow-hidden">
    <div class="flex flex-col lg:flex-row">
      <!-- Column 1 - 33% width, sticky -->
      <div class="w-full lg:w-1/3 lg:sticky lg:top-0 lg:h-screen border-r-2 border-standard-blue flex flex-col items-center justify-center p-4">
        <div class="w-full"> <!-- Increased size of product media container -->
          {% render 'product-media-gallery', product: product, variant_images: variant_images, limit: 1 %}
        </div>
        
        <div class="mt-4">
          {%- assign product_form_id = 'product-form-' | append: section.id -%}
          {% form 'product', product, id: product_form_id, class: "flex flex-col items-center" %}
            <input type="hidden" name="id" value="{{ product.selected_or_first_available_variant.id }}">
            {{ form | payment_terms }}
            <button type="submit" class="button-style">
              {{ 'products.product.add_to_cart' | t }}
            </button>
          {% endform %}
        </div>
      </div>
  
      <!-- Columns 2 and 3 wrapper - 66% width, scrollable -->
      <div class="w-full lg:w-2/3 overflow-y-auto h-screen scrollbar-hide">
        <div class="flex flex-col lg:flex-row">
          <!-- Column 2 - 33% width -->
          <div class="w-full lg:w-1/2 p-4">
            <div class="pt-40"> <!-- Added top padding -->
              <h1 class="text-3xl font-standard font-bold mb-4">{{ section.settings.main_heading }}</h1>
              <p class="font-aux-mono mb-4">{{ section.settings.sub_heading }}</p>
              
              <p class="font-standard mb-4">{{ section.settings.intro_text }}</p>
              
              <div class="font-standard mb-4">{{ section.settings.feature_list }}</div>
              
              <a href="{{ section.settings.learn_more_url }}" class="button-style mt-4 mb-8">Learn More</a>
              
              <p class="font-standard mb-8">{{ section.settings.closing_statement }}</p>
            </div>
          </div>
  
          <!-- Column 3 - 33% width -->
          <div class="w-full lg:w-1/2 p-4">
            <div class="pt-40"> <!-- Added top padding -->
              <div class="mb-8">
                <h3 class="text-xl font-standard mb-2">Customer Testimony</h3>
                <p class="font-aux-mono">{{ section.settings.testimony }}</p>
              </div>
  
              <h3 class="text-xl font-standard mb-4">How does m.i.a. work?</h3>
              <div class="flex flex-row flex-wrap justify-between mb-8">
      {% for i in (1..3) %}
      <div class="flex flex-col items-center w-full md:w-1/3 px-2">
        <div class="border-2 border-standard-blue h-12 w-12 mb-2 flex items-center justify-center">
          <!-- You can add an icon or number here -->
        </div>
        <h4 class="text-lg font-standard mb-2">
          {% case i %}
          {% when 1 %}
          (1) Mark
          {% when 2 %}
          (2) Insulate
          {% when 3 %}
          (3) Analyze
          {% endcase %}
        </h4>
        <p class="font-aux-mono text-sm text-center">
          {% assign step_text_key = 'step' | append: i | append: '_text' %}
          {{ section.settings[step_text_key] }}
        </p>
      </div>
      {% endfor %}
    </div>
    <a href="{{ section.settings.events_url }}" class="button-style block text-center">Upcoming Events</a>
  </div>
</div>
              
        </div>
      </div>
    </div>
  </div>
  
  {% javascript %}
  // Prevent scrolling when there's no content to scroll
  document.addEventListener('DOMContentLoaded', function() {
    const columns = document.querySelectorAll('.overflow-y-auto');
    columns.forEach(column => {
      column.addEventListener('scroll', function(e) {
        if (this.scrollHeight <= this.clientHeight) {
          e.preventDefault();
          this.scrollTop = 0;
        }
      });
    });
  });
  {% endjavascript %}